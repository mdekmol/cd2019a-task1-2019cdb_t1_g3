<!doctype html>
<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>CMSimfly</title> <link rel="stylesheet" type="text/css" href="./../static/cmsimply.css">
<script src="tipuesearch_content.js"></script>
<script src="./../static/jquery.js"></script>
<link rel="stylesheet" href="./../static/tipuesearch/css/tipuesearch.css">
<script src="./../static/tipuesearch/tipuesearch_set.js"></script>
<script src="./../static/tipuesearch/tipuesearch.min.js"></script>

<script type="text/javascript" src="./../static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCSharp.js"></script>
<link type="text/css" rel="stylesheet" href="./../static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<!-- for LaTeX equations 暫時不用
<script src="https://scrum-3.github.io/web/math/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'left', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>
-->
<!-- 暫時不用
<script src="./../static/fengari-web.js"></script>
<script type="text/javascript" src="./../static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->

<script type="text/javascript">
/*shorthand of $(document).ready(function(){};); */
$(function(){
    $("ul.topmenu> li:has(ul) > a").append('<div class="arrow-right"></div>');
    $("ul.topmenu > li ul li:has(ul) > a").append('<div class="arrow-right"></div>');
});
function doSearch() {
     $('#tipue_search_input').tipuesearch({
        newWindow: true, minimumLength: 2
     });
}
$(document).ready(doSearch);
</script>

</head><header><h1>2019 Collaborative Product Design Internship BG3</h1> <confmenu>
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="sitemap.html">Site Map</a></li>
<li><a href="./../reveal/index.html">reveal</a></li>
<li><a href="./../blog/index.html">blog</a></li>

</ul>
</confmenu></header>
<div class='container'><nav><ul id='css3menu1' class='topmenu'><div class="tipue_search_group"><input style="width: 6vw;" type="text" name="q" id="tipue_search_input" pattern=".{2,}" title="Press enter key to search" required></div><li><a href='Introduction.html'>Introduction</a><li><a href='Course.html'>Course</a><ul><li><a href='week1.html'>week1</a><li><a href='week2.html'>week2</a><li><a href='week3.html'>week3</a><li><a href='week4.html'>week4</a><li><a href='week5.html'>week5</a><li><a href='week6.html'>week6</a><li><a href='week7.html'>week7</a><li><a href='week8.html'>week8</a><li><a href='week9.html'>week9</a></li></ul><li><a href='Independent study.html'>Independent study</a><ul><li><a href='w5.html'>w5</a><li><a href='w6.html'>w6</a><li><a href='w7.html'>w7</a><li><a href='w8.html'>w8</a><li><a href='w9-1.html'>w9-1</a><li><a href='w9-2.html'>w9-2</a></li></ul><li><a href='V-rep.html'>V-rep</a><ul><li><a href='Tutorial.html'>Tutorial</a><ul><li><a href='BubbleRob.html'>BubbleRob</a><li><a href='Building a clean model.html'>Building a clean model</a></li></li></ul></ul><li><a href='Experience.html'>Experience</a><ul><li><a href='2019.03.15.html'>2019.03.15</a><ul><li><a href='40423207-4.html'>40423207-4</a><li><a href='40423160-4.html'>40423160-4</a><li><a href='40423131-4.html'>40423131-4</a><li><a href='40623207-4.html'>40623207-4</a><li><a href='40623218-4.html'>40623218-4</a><li><a href='40623219-4.html'>40623219-4</a><li><a href='40623231-4.html'>40623231-4</a><li><a href='40623237-4.html'>40623237-4</a><li><a href='40623241-4.html'>40623241-4</a><li><a href='40623246-4.html'>40623246-4</a></li></ul><li><a href='2019.03.22.html'>2019.03.22</a><ul><li><a href='40423207-5.html'>40423207-5</a><li><a href='40423160-5.html'>40423160-5</a><li><a href='40423131-5.html'>40423131-5</a><li><a href='40623207-5.html'>40623207-5</a><li><a href='40623218-5.html'>40623218-5</a><li><a href='40623219-5.html'>40623219-5</a><li><a href='40623231-5.html'>40623231-5</a><li><a href='40623237-5.html'>40623237-5</a><li><a href='40623241-5.html'>40623241-5</a><li><a href='40623246-5.html'>40623246-5</a></li></ul><li><a href='2019.03.29.html'>2019.03.29</a><ul><li><a href='40423207-6.html'>40423207-6</a><li><a href='40423160-6.html'>40423160-6</a><li><a href='40423131-6.html'>40423131-6</a><li><a href='40623207-6.html'>40623207-6</a><li><a href='40623218-6.html'>40623218-6</a><li><a href='40623219-6.html'>40623219-6</a><li><a href='40623231-6.html'>40623231-6</a><li><a href='40623237-6.html'>40623237-6</a><li><a href='40623241-6.html'>40623241-6</a><li><a href='40623246-6.html'>40623246-6</a></li></ul><li><a href='2019.04.05.html'>2019.04.05</a><ul><li><a href='40423207-7.html'>40423207-7</a><li><a href='40423160-7.html'>40423160-7</a><li><a href='40423131-7.html'>40423131-7</a><li><a href='40623207-7.html'>40623207-7</a><li><a href='40623218-7.html'>40623218-7</a><li><a href='40623219-7.html'>40623219-7</a><li><a href='40623231-7.html'>40623231-7</a><li><a href='40623237-7.html'>40623237-7</a><li><a href='40623241-7.html'>40623241-7</a><li><a href='40623246-7.html'>40623246-7</a></li></ul><li><a href='2019.04.12.html'>2019.04.12</a><ul><li><a href='40423207-8.html'>40423207-8</a><li><a href='40423160-8.html'>40423160-8</a><li><a href='40423131-8.html'>40423131-8</a><li><a href='40623207-8.html'>40623207-8</a><li><a href='40623218-8.html'>40623218-8</a><li><a href='40623219-8.html'>40623219-8</a><li><a href='40623231-8.html'>40623231-8</a><li><a href='40623237-8.html'>40623237-8</a><li><a href='40623241-8.html'>40623241-8</a><li><a href='40623246-8.html'>40623246-8</a></li></li></ul></ul><li><a href='Git http and ssh.html'>Git http and ssh</a><li><a href='Directory Structure.html'>Directory Structure</a><li><a href='Page editing.html'>Page editing</a><ul><li><a href='Insert code.html'>Insert code</a><ul><li><a href='Java cold.html'>Java cold</a><li><a href='Python cold.html'>Python cold</a><li><a href='C   C++ cold.html'>C   C++ cold</a><li><a href='Lua  cold.html'>Lua  cold</a><li><a href='Javascript  cold.html'>Javascript  cold</a><li><a href='Internet newsletter.html'>Internet newsletter</a><li><a href='Blog edit.html'>Blog edit</a></li></li></ul></ul><li><a href='Q & A.html'>Q & A</a><li><a href='personal video.html'>personal video</a></li></ul></nav><section><div id="tipue_search_content">Tutorial << <a href='Tutorial.html'>Previous</a> <a href='Building a clean model.html'>Next</a> >> Building a clean model<br /><h1>BubbleRob</h1>
<ul style="list-style-type: disc;">
<ul style="list-style-type: disc;">
<li>Add a primitive sphere of diameter 0.2 to the scene with [Menu bar --&gt; Add --&gt; Primitive shape --&gt; Sphere].</li>
<li>Adjust the <strong>X-size</strong> item to 0.2, then click <strong>OK</strong>. <br/><img alt="" height="238" src="./../images/01.png" width="300"/></li>
<li>Start the simulation (&lt;control-space&gt;, and copy-and-paste the created sphere (with &lt;control-c&gt; then &lt;control-v&gt;).<br/><img alt="" height="481" src="./../images/1.gif" width="800"/></li>
<li>Enable<span style="color: #3366ff;"> <strong><a href="http://www.coppeliarobotics.com/helpFiles/en/collidableObjects.htm" style="color: #3366ff;">Collidable</a> </strong></span>, <span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/measurableObjects.htm" style="color: #3366ff;">Measurable</a> </strong></span>, <span><span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/renderableObjects.htm" style="color: #3366ff;">Renderable</a></strong></span> and <span><span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/detectableObjects.htm" style="color: #3366ff;">Detectable</a></strong></span> in the object common properties for that shape.<br/><img alt="" height="429" src="./../images/02.png" width="800"/></li>
<li>Open the <span><span> </span></span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/positionDialog.htm" style="color: #3366ff;">position dialog</a></span> on the <strong>translation</strong> tab, select the sphere representing BubbleRob's body, and enter 0.02 for <strong>Along Z</strong>.</li>
<li>Make sure that the <strong>Relative to</strong>-item is set to <strong>World</strong>. Then we click <strong>Translate selection</strong>.</li>
<li>Edit sphere's name. We enter <em>bubbleRob</em> and press enter.<br/><img alt="" height="481" src="./../images/03.png" width="800"/></li>
<li>Add a <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/proximitySensors.htm" style="color: #3366ff;">proximity sensor</a></span> so that <em>BubbleRob</em> knows when it is approaching obstacles: we select [Menu bar --&gt; Add --&gt; Proximity sensor --&gt; Cone type].</li>
<li>In the orientation dialog on the <strong>Rotation</strong> tab, we enter 90 for <strong>Around Y</strong> and for <strong>Around Z</strong>, then click <strong>Rotate selection</strong>.<br/><img alt="" height="481" src="./../images/04.png" width="800"/></li>
<li>In the <span> </span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/positionDialog.htm" style="color: #3366ff;">position dialog</a></span>, on the <strong>position</strong> tab, we enter 0.1 for<strong> X-coord</strong>. and 0.12 for <strong>Z-coord</strong>.<br/><img alt="" height="481" src="./../images/05.png" width="800"/></li>
<li>Open <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/proximitySensorPropertiesDialog.htm" style="color: #3366ff;">its properties</a></span> dialog.</li>
<li>Click <strong>Show volume parameter</strong> to open the <span> </span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/proximitySensorVolumeDialog.htm" style="color: #3366ff;">proximity sensor volume dialog</a></span>.</li>
<li>Adjust items<strong> Offset</strong> to 0.005, <strong>Angle</strong> to 30 and <strong>Range</strong> to 0.15.<br/><img alt="" height="481" src="./../images/06.png" width="800"/></li>
<li>In the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/proximitySensorPropertiesDialog.htm" style="color: #3366ff;">proximity sensor properties</a></span><span>, we click<span> </span></span><strong>Show detection parameters</strong><span>.</span></li>
<li>Uncheck item <strong>Don't allow detections if distance smaller than</strong> then close that dialog again.<br/><img alt="" height="481" src="./../images/07.png" width="800"/></li>
<li>Edit proximity sensor's name. We enter <em>bubbleRob_sensingNose</em> and press enter.<br/>Select <em>bubbleRob_sensingNose</em>, then control-select bubbleRob, then click [Menu bar --&gt; Edit --&gt; Make last selected object parent].<br/><img alt="" height="481" src="./../images/08.png" width="800"/></li>
<li>This is what we now have:<br/><img alt="" height="258" src="./../images/08.1.png" width="500"/></li>
<li>Create a new scene with [Menu bar --&gt; File --&gt; New scene].<br/><img alt="" height="235" src="./../images/09.png" width="300"/></li>
<li>Enable <span style="color: #3366ff;"> <strong><a href="http://www.coppeliarobotics.com/helpFiles/en/collidableObjects.htm" style="color: #3366ff;">Collidable</a></strong></span><span>,<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/measurableObjects.htm" style="color: #3366ff;">Measurable</a></strong></span><span>,<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/renderableObjects.htm" style="color: #3366ff;">Renderable</a></strong></span><span><span> </span>and<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/detectableObjects.htm" style="color: #3366ff;">Detectable</a></strong></span> in the<span> </span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/commonPropertiesDialog.htm" style="color: #3366ff;">object common properties</a></span>  for that cylinder.<br/><img alt="" height="429" src="./../images/10.png" width="800"/></li>
<li>Set the cylinder's absolute position to (0.05,0.1,0.04) and its absolute orientation to (-90,0,0).<br/><img alt="" height="429" src="./../images/11.png" width="800"/><br/><img alt="" height="429" src="./../images/12.png" width="800"/></li>
<li>Change the name to <em>bubbleRob_leftWheel</em>.</li>
<li>Copy and paste the wheel, and set the absolute Y coordinate of the copy to -0.1.<br/><img alt="" height="429" src="./../images/13.png" width="800"/></li>
<li>We rename the copy to <em>bubbleRob_rightWheel.</em></li>
<li>Select the two wheels, copy them, then switch back to scene 1, then paste the wheels.</li>
<li>Click [Menu bar --&gt; Add --&gt; Joint --&gt; Revolute] to add a revolute joint to the scene.</li>
<li>Keep the joint selected, then control-select <em>bubbleRob_leftWheel</em>.</li>
<li>In the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/positionDialog.htm" style="color: #3366ff;">position dialog</a></span>, on the <strong>position</strong> tab, we click the <strong>Apply to selection</strong> button.<br/><img alt="" height="481" src="./../images/14.png" width="800"/></li>
<li>
<pre>In the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/orientationDialog.htm" style="color: #3366ff;">orientation dialog</a></span>, on the orientation tab, we do the same.</pre>
<img alt="" height="481" src="./../images/15.png" width="800"/></li>
<li>Rename the joint to <em>bubbleRob_leftMotor</em>.</li>
<li>Click <strong>Show dynamic parameters</strong> to open the <span><span> </span></span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/jointDynamicsProperties.htm" style="color: #3366ff;">joint dynamics properties</a></span> dialog.</li>
<li><strong>Enable the motor</strong>, and check item Lock motor when target velocity is zero.<br/><br/><img alt="" height="429" src="./../images/16.png" width="800"/></li>
<li>Repeat the same procedure for the right motor and rename it to <em>bubbleRob_rightMotor</em>.</li>
<li>Attach the left wheel to the left motor, the right wheel to the right motor, then attach the two motors to <em>bubbleRob</em>.</li>
<li>This is what we have:<br/><br/><img alt="" height="355" src="./../images/19.1.png" width="800"/></li>
<li>In a new scene we and add a pure primitive sphere with diameter 0.05 and make the sphere <span><span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/collidableObjects.htm" style="color: #3366ff;">Collidable</a>,</strong> <strong><a href="http://www.coppeliarobotics.com/helpFiles/en/measurableObjects.htm" style="color: #3366ff;">Measurable</a></strong><span style="color: #000000;">,</span> <strong><a href="http://www.coppeliarobotics.com/helpFiles/en/renderableObjects.htm" style="color: #3366ff;">Renderable</a></strong><span style="color: #000000;"> and </span><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/detectableObjects.htm" style="color: #3366ff;">Detectable</a></strong></span> (if not already enabled), then rename it to bubbleRob_slider.<br/><br/><img alt="" height="237" src="./../images/20.png" width="300"/><br/><br/><img alt="" height="429" src="./../images/21.png" width="800"/></li>
<li>Add a <a href="http://www.coppeliarobotics.com/helpFiles/en/forceSensors.htm"><span style="color: #3366ff;">force sensor objec</span>t</a> with [Menu bar --&gt; Add --&gt; Force sensor].</li>
<li>Rename it to <em>bubbleRob_connection</em> and shift it up by 0.05.<br/><br/><img alt="" height="429" src="./../images/22.png" width="800"/></li>
<li>Attach the slider to the force sensor, then copy both objects, switch back to scene 1 and paste them.</li>
<li>Shift the force sensor by -0.07 along the absolute X-axis, then attach it to the robot body.<br/><br/><img alt="" height="429" src="./../images/23.png" width="800"/></li>
<li>If we run the simulation now, we can notice that the slider is slightly moving in relation to the robot body.<br/><br/><img alt="" height="429" src="./../images/2.gif" width="800"/></li>
<li>In the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/shapeDynamicsProperties.htm" style="color: #3366ff;">shape dynamics properties</a></span><span>,</span> for <em>bubbleRob_slider</em> we set the <strong>local respondable mask</strong> to 00001111, and for bubbleRob, we set the<strong> local respondable mask </strong>to 11110000.<br/><br/><img alt="" height="429" src="./../images/24.png" width="800"/><br/><br/><img alt="" height="429" src="./../images/25.png" width="800"/></li>
<li>If we run the simulation again, we can notice that both objects do not interfere anymore.<br/><br/><img alt="" height="429" src="./../images/3.gif" width="800"/></li>
<li>This is what we now have:<br/><br/><img alt="" height="250" src="./../images/25.1.png" width="500"/></li>
<li>Select the two wheels and the slider, and in the shape dynamics dialog we click three times <strong>M=M*2 (for selection)</strong>.</li>
<li>The effect is that all selected shapes will have their masses multiplied by 8.<br/><br/><img alt="" height="429" src="./../images/26.png" width="800"/></li>
<li>Do the same with the inertias of the 3 selected shapes.<br/><br/><img alt="" height="429" src="./../images/26.1.png" width="800"/></li>
<li>Run the simulation again.<br/><br/><img alt="" height="429" src="./../images/4.gif" width="800"/></li>
<li>Set the <strong>Target velocity</strong> to 50 for both motors.<br/><br/><img alt="" height="429" src="./../images/27.png" width="800"/></li>
<li>We run the simulation: <em>BubbleRob</em> now moves forward and eventually falls off the floor.<br/><br/><img alt="" height="429" src="./../images/5.gif" width="800"/></li>
<li>Reset the <strong>Target velocity</strong> item to zero for both motors.<br/><br/><img alt="" height="429" src="./../images/28.png" width="800"/></li>
<li>Click [Menu bar --&gt; Tools --&gt; Collections] to open the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/collectionsDialog.htm" style="color: #3366ff;">collection dialog</a></span>.</li>
<li>In the collection dialog, we click <strong>Add new collection</strong>.</li>
<li>While the new collection item is selected in the list, select <em>bubbleRob</em> in the scene hierarchy, and then click <strong>Add</strong> in the collection dialog.<br/><br/><img alt="" height="429" src="./../images/29.png" width="800"/></li>
<li>To edit the collection name, we double-click it, and rename it to <em>bubbleRob_collection</em>.</li>
<li>Open the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/distanceCalculation.htm" style="color: #3366ff;">distance dialog</a></span> with [Menu bar --&gt; Tools --&gt; Calculation module properties].</li>
<li>In the distance dialog, we click <strong>Add new distance object</strong> and select a distance pair: [collection] <em>bubbleRob_collection</em> - <em>all other measurable objects</em> in the scene. <br/><br/><img alt="" height="429" src="./../images/30.png" width="800"/></li>
<li>Rename the distance object to <em>bubbleRob_distance</em> with a double-click in its name.</li>
<li>Click [Menu bar --&gt; Add --&gt; Graph] and rename it to <em>bubbleRob_graph</em>.</li>
<li>Attach the graph to bubbleRob, and set the graph's absolute coordinates to (0,0,0.005).<br/><br/><img alt="" height="429" src="./../images/31.png" width="800"/></li>
<li>Open the graph properties dialog by double-clicking its icon in the scene hierarchy.</li>
<li>Uncheck <strong>Display XYZ</strong>-planes, then click <strong>Add new data stream to record</strong> and select <strong>Object: absolute x-position</strong> for the <strong>Data stream type</strong>, and <em>bubbleRob_graph</em> for the <strong>Object / item to record</strong>.<br/><br/><img alt="" height="429" src="./../images/32.png" width="800"/></li>
<li>Also want to record the y and z positions: we add those data streams in a similar way as above.</li>
<li>Click <strong>Add new data stream to record</strong> and select <strong>Distance: segment length</strong> for the <strong>Data stream type</strong>, and <em>bubbleRob_distance</em> for the <strong>Object / item to record</strong>.<br/><br/><img alt="" height="429" src="./../images/33.png" width="800"/></li>
<li>In the <strong>Data stream recording list</strong>, we now rename Data to bubbleRob_x_pos, Data0 to bubbleRob_y_pos, Data1 to bubbleRob_z_pos, and Data2 to bubbleRob_obstacle_dist.</li>
<li>Select <em>bubbleRob_x_pos</em> in the <strong>Data Stream recording list</strong> and in the <strong>Time graph properties</strong> section, uncheck <strong>Visible</strong>. We do the same for <em>bubbleRob_y_pos</em> and <em>bubbleRob_z_pos</em>.<br/><br/><img alt="" height="429" src="./../images/34.png" width="800"/></li>
<li>Click <strong>Edit 3D curves</strong> to open the <a href="http://www.coppeliarobotics.com/helpFiles/en/graphCurvePropertiesDialog.htm"><span> </span><span style="color: #3366ff;">XY graph and 3D curve dialog</span></a>, then click <strong>Add new curve</strong>.</li>
<li>In the dialog that pops open, we select <em>bubbleRob_x_pos</em> for the <strong>X-value</strong> item, <em>bubbleRob_y_pos</em> for the <strong>Y-value</strong> item and <em>bubbleRob_z_po</em>s for the<strong> Z-value</strong> item. <br/><br/><img alt="" height="429" src="./../images/35.png" width="800"/></li>
<li>Rename the newly added curve from Curve to <em>bubbleRob_path</em>.</li>
<li>Check the <strong>Relative to world</strong><span><span> </span>item and set<span> </span></span><strong>Curve width</strong> to 4.<br/><br/><img alt="" height="429" src="./../images/36.png" width="800"/></li>
<li>Set one motor <strong>target velocity</strong> to 50, run the simulation, and will see <em>BubbleRob's trajectory</em> displayed in the scene. <br/><img alt="" height="429" src="./../images/6.gif" width="800"/></li>
</ul>
</ul>
<ul style="list-style-type: disc;">
<li>Stop the simulation and reset the motor target velocity to zero.</li>
<li>Add a pure primitive cylinder with following dimensions: (0.1, 0.1, 0.2).<br/><br/><img alt="" height="429" src="./../images/38.png" width="800"/></li>
<li>Disable <span> </span><strong>Body is dynamic</strong><span><span> </span>in the<span> </span></span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/shapeDynamicsProperties.htm" style="color: #3366ff;">shape dynamics properties</a>.</span><br/><br/><img alt="" height="429" src="./../images/39.png" width="800"/></li>
<li>Want our cylinder to be <span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/collidableObjects.htm" style="color: #3366ff;">Collidable</a></strong></span><span>,<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/measurableObjects.htm" style="color: #3366ff;">Measurable</a></strong></span><span>,<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/renderableObjects.htm" style="color: #3366ff;">Renderable</a></strong></span><span><span> </span>and<span> </span></span><span style="color: #3366ff;"><strong><a href="http://www.coppeliarobotics.com/helpFiles/en/detectableObjects.htm" style="color: #3366ff;">Detectable</a></strong></span>.<br/><br/><img alt="" height="429" src="./../images/40.png" width="800"/></li>
<li>The cylinder is still selected, we click the object translation toolbar button.</li>
<li>Drag any point in the scene: the cylinder will follow the movement while always being constrained to Keep the same Z-coordinate.</li>
<li>Copy and paste the cylinder a few times, and move them to positions around <em>BubbleRob.</em><br/><br/><img alt="" height="450" src="./../images/41.png" width="800"/></li>
<li>Set a <strong>target velocity</strong> of 50 for the left motor and run the simulation: the graph view now displays the distance to the closest obstacle and the distance segment is visible in the scene too.<br/><br/><img alt="" height="429" src="./../images/7.gif" width="800"/></li>
<li>Stop the simulation and reset the target velocity to zero.</li>
<li>Check items <strong>Object is model bas</strong>e and <strong>Object/model can transfer or accept DNA</strong> in the <span><span> </span></span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/commonPropertiesDialog.htm" style="color: #3366ff;">object common properties</a><span style="color: #000000;">.</span></span><br/><br/><img alt="" height="429" src="./../images/42.png" width="800"/></li>
<li>Select the two joints, the proximity sensor and the graph, then enable item <strong>Igonred by model bounding box</strong> and click <strong>Apply to selection</strong>.<br/><br/><img alt="" height="429" src="./../images/42.1.png" width="800"/></li>
<li>Disable <strong>camera visibility layer</strong> 2, and enable <strong>camera visibility layer</strong> 10 for the two joints and the force sensor: this effectively hides the two joints and the force sensor<br/><br/><img alt="" height="429" src="./../images/42.2.png" width="800"/></li>
<li>Select the vision sensor, the two wheels, the slider, and the graph, then enable item <strong>Select base of model instead</strong>.<br/><br/><img alt="" height="429" src="./../images/43.png" width="800"/></li>
<li>Click [Menu bar --&gt; Add --&gt; Vision sensor --&gt; Perspective type].</li>
<li>Set the local position and orientation of the vision sensor to (0,0,0).</li>
<li>At the same position and orientation as BubbleRob's proximity sensor.</li>
<li>Open <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/visionSensorPropertiesDialog.htm" style="color: #3366ff;">its properties</a></span> dialog.</li>
<li>Set the <strong>Far clipping plane</strong> item to 1, and the <strong>Resolution x</strong> and <strong>Resolution y</strong> items to 256 and 256.<br/><br/><img alt="" height="429" src="./../images/44.png" width="800"/></li>
<li>Open the <span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/visionSensorFilterDialog.htm" style="color: #3366ff;">vision sensor filter dialog</a></span> by clicking <strong>Show filter dialog</strong>.</li>
<li>Select the filter component <strong>Edge detection on work image</strong> and click <strong>Add filter</strong>.</li>
<li>Position the newly added filter in second position (one position <strong>up</strong>, using the up button).</li>
<li>Double-click the newly added filter component and adjust its <strong>Threshold</strong> item to 0.2, then click <strong>OK</strong>.<br/><br/><img alt="" height="429" src="./../images/45.png" width="800"/></li>
<li>Added floating view, right-click [Popup menu --&gt; View --&gt; Associate view with selected vision sensor](make sure the vision sensor is selected during that process).</li>
<li>Start the simulation, then stop it again.<br/><br/><img alt="" height="429" src="./../images/8.gif" width="800"/></li>
<li>Select bubbleRob and click [Menu bar --&gt; Add --&gt; Associated child script --&gt; Non threaded].</li>
<li>Double-click the little script icon that appeared next to bubbleRob's name in the scene hierarchy.</li>
<li>Copy and paste following code into the <span> </span><span style="color: #3366ff;"><a href="http://www.coppeliarobotics.com/helpFiles/en/scriptEditor.htm" style="color: #3366ff;">script editor</a></span>, then close it:<br/>
<pre><img alt="" height="429" src="./../images/51.png" width="800"/><br/><br/><img alt="" height="429" src="./../images/9.gif" width="800"/></pre>
</li>
<li>Run the simulation. BubbleRob now moves forward while trying to avoid obstacles.</li>
</ul>
<br />Tutorial << <a href='Tutorial.html'>Previous</a> <a href='Building a clean model.html'>Next</a> >> Building a clean model</div></section></div></body></html>